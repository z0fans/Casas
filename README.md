<div align="center">

# ğŸš€ ClashDesk Manager

**å¯æ‰©å±•çš„è¿œç¨‹æ¡Œé¢é…ç½®ç®¡ç†å™¨**

[![Tauri](https://img.shields.io/badge/Tauri-1.5-blue?logo=tauri)](https://tauri.app)
[![React](https://img.shields.io/badge/React-18-61DAFB?logo=react)](https://react.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-3178C6?logo=typescript)](https://www.typescriptlang.org)
[![Rust](https://img.shields.io/badge/Rust-1.75-orange?logo=rust)](https://www.rust-lang.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

</div>

---

## ğŸ“– ç®€ä»‹

ClashDesk Manager æ˜¯ä¸€æ¬¾åŸºäº Tauri æ„å»ºçš„è·¨å¹³å°æ¡Œé¢åº”ç”¨,ä¸“æ³¨äºè¿œç¨‹æ¡Œé¢é…ç½®çš„è‡ªåŠ¨åŒ–ç®¡ç†ã€‚æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬:

- ğŸ” **æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ« Clash/Clash Verge ä»£ç†ç«¯å£
- âš™ï¸ **é…ç½®ç®¡ç†** - å¯è§†åŒ–ç¼–è¾‘ MultiDesk XML é…ç½®
- ğŸ”„ **è‡ªåŠ¨åŒæ­¥** - ä¸€é”®åŒæ­¥ä»£ç†é…ç½®åˆ°æ‰€æœ‰æœåŠ¡å™¨
- ğŸ§© **æ’ä»¶ç³»ç»Ÿ** - æ”¯æŒæ‰©å±•å…¶ä»–è¿œç¨‹æ¡Œé¢å·¥å…·

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å·²å®ç°
- âœ… Clash/Clash Verge ç«¯å£æ£€æµ‹(7890/7897)
- âœ… MultiDesk XML é…ç½®æ–‡ä»¶è¯»å†™
- âœ… æœåŠ¡å™¨åˆ†ç»„ä¸ä»£ç†é…ç½®ç®¡ç†
- âœ… è‡ªåŠ¨ä»£ç†ç«¯å£é…ç½®åŒæ­¥

### è®¡åˆ’ä¸­
- ğŸ”² å¯†ç åŠ è§£å¯†åŠŸèƒ½
- ğŸ”² é…ç½®æ–‡ä»¶å¤‡ä»½ä¸æ¢å¤
- ğŸ”² æ‰¹é‡æœåŠ¡å™¨å¯¼å…¥
- ğŸ”² XShell/Putty é…ç½®æ”¯æŒ(æ’ä»¶)

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: Zustand
- **å›¾æ ‡**: Lucide React
- **æ„å»ºå·¥å…·**: Vite

### åç«¯
- **æ¡†æ¶**: Tauri 1.5
- **è¯­è¨€**: Rust 1.75+
- **XML è§£æ**: quick-xml
- **å¼‚æ­¥è¿è¡Œæ—¶**: Tokio

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18
- Rust >= 1.75
- npm æˆ– pnpm

### å®‰è£…ä¾èµ–
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/clashdesk-manager.git
cd clashdesk-manager

# å®‰è£…å‰ç«¯ä¾èµ–
npm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run tauri dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run tauri build
```

---

## ğŸ“ æ•´ä½“æ¶æ„

```
ClashDesk Manager
â”œâ”€â”€ å‰ç«¯å±‚ (React)
â”‚   â”œâ”€â”€ UI ç»„ä»¶åº“
â”‚   â”œâ”€â”€ çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ API æœåŠ¡å±‚
â”‚
â”œâ”€â”€ åç«¯å±‚ (Rust/Tauri)
â”‚   â”œâ”€â”€ å‘½ä»¤å¤„ç†å™¨
â”‚   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â””â”€â”€ ç³»ç»Ÿäº¤äº’æ¨¡å—
â”‚
â””â”€â”€ æ’ä»¶ç³»ç»Ÿ (è§„åˆ’ä¸­)
    â”œâ”€â”€ MultiDesk æ’ä»¶
    â”œâ”€â”€ XShell æ’ä»¶
    â””â”€â”€ Putty æ’ä»¶
```

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
clashdesk-manager/
â”œâ”€â”€ src/                           # å‰ç«¯ä»£ç  (React)
â”‚   â”œâ”€â”€ App.tsx                    # ä¸»å…¥å£
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ index.css                  # Tailwind å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx        # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx         # é¡¶éƒ¨æ 
â”‚   â”‚   â”‚   â””â”€â”€ Layout.tsx         # æ•´ä½“å¸ƒå±€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ common/                # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Switch.tsx
â”‚   â”‚   â”‚   â””â”€â”€ StatusBadge.tsx    # çŠ¶æ€æ ‡ç­¾
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ features/              # åŠŸèƒ½ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ ClashDetector.tsx  # Clashæ£€æµ‹é¢æ¿
â”‚   â”‚       â”œâ”€â”€ ServerList.tsx     # æœåŠ¡å™¨åˆ—è¡¨
â”‚   â”‚       â”œâ”€â”€ ServerEditor.tsx   # æœåŠ¡å™¨ç¼–è¾‘å™¨
â”‚   â”‚       â””â”€â”€ GroupManager.tsx   # åˆ†ç»„ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                     # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx          # ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ MultiDesk/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx          # MultiDeskä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ GroupConfig.tsx    # åˆ†ç»„é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ServerConfig.tsx   # æœåŠ¡å™¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ ClashConfig.tsx        # Clashé…ç½®é¡µ
â”‚   â”‚   â”œâ”€â”€ Settings.tsx           # åº”ç”¨è®¾ç½®
â”‚   â”‚   â””â”€â”€ PluginMarket.tsx       # æ’ä»¶å¸‚åœº(æœªæ¥)
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                     # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useClashDetect.ts      # Clashæ£€æµ‹é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useMultiDesk.ts        # MultiDeskæ“ä½œ
â”‚   â”‚   â””â”€â”€ useConfig.ts           # é…ç½®æ–‡ä»¶ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # APIè°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ tauri.ts               # Tauriå‘½ä»¤å°è£…
â”‚   â”‚   â”œâ”€â”€ multidesk.ts           # MultiDeskæœåŠ¡
â”‚   â”‚   â””â”€â”€ clash.ts               # ClashæœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                     # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ multidesk.ts           # MultiDeskç±»å‹
â”‚   â”‚   â”œâ”€â”€ clash.ts               # Clashç±»å‹
â”‚   â”‚   â””â”€â”€ common.ts              # é€šç”¨ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ xml-parser.ts          # XMLè§£æ
â”‚   â”‚   â”œâ”€â”€ password-crypto.ts     # å¯†ç åŠ è§£å¯†
â”‚   â”‚   â””â”€â”€ validator.ts           # æ•°æ®éªŒè¯
â”‚   â”‚
â”‚   â””â”€â”€ store/                     # çŠ¶æ€ç®¡ç† (Zustand)
â”‚       â”œâ”€â”€ appStore.ts            # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚       â”œâ”€â”€ multideskStore.ts      # MultiDeskçŠ¶æ€
â”‚       â””â”€â”€ clashStore.ts          # ClashçŠ¶æ€
â”‚
â”œâ”€â”€ src-tauri/                     # åç«¯ä»£ç  (Rust)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs                # ä¸»å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commands/              # Tauri å‘½ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ clash.rs           # Clashæ£€æµ‹å‘½ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ multidesk.rs       # MultiDeskæ“ä½œå‘½ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ file.rs            # æ–‡ä»¶æ“ä½œå‘½ä»¤
â”‚   â”‚   â”‚   â””â”€â”€ system.rs          # ç³»ç»Ÿä¿¡æ¯å‘½ä»¤
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ port_detector.rs   # ç«¯å£æ£€æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ process_finder.rs  # è¿›ç¨‹æŸ¥æ‰¾
â”‚   â”‚   â”‚   â”œâ”€â”€ xml_handler.rs     # XMLå¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ crypto.rs          # åŠ è§£å¯†æœåŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ multidesk.rs       # MultiDeskæ•°æ®ç»“æ„
â”‚   â”‚   â”‚   â””â”€â”€ clash.rs           # Clashæ•°æ®ç»“æ„
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚       â””â”€â”€ disk_scanner.rs    # ç£ç›˜æ‰«æå·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ Cargo.toml                 # Rustä¾èµ–
â”‚   â””â”€â”€ tauri.conf.json            # Taurié…ç½®
â”‚
â”œâ”€â”€ public/                        # é™æ€èµ„æº
â”‚   â””â”€â”€ icons/                     # åº”ç”¨å›¾æ ‡
â”‚
â”œâ”€â”€ tailwind.config.js             # Tailwindé…ç½®
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts                 # Viteé…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

<details>
<summary>ğŸ“‚ è¯¦ç»†ç›®å½•è¯´æ˜</summary>

### å‰ç«¯æ¨¡å—
- `components/` - React ç»„ä»¶
  - `layout/` - å¸ƒå±€ç»„ä»¶(Sidebar, Header)
  - `common/` - é€šç”¨ç»„ä»¶(Button, Card, Input)
  - `features/` - åŠŸèƒ½ç»„ä»¶(ClashDetector, ServerList)
- `pages/` - é¡µé¢çº§ç»„ä»¶
- `hooks/` - è‡ªå®šä¹‰ React Hooks
- `services/` - API è°ƒç”¨å°è£…
- `types/` - TypeScript ç±»å‹å®šä¹‰
- `store/` - Zustand çŠ¶æ€ç®¡ç†

### åç«¯æ¨¡å—
- `commands/` - Tauri å‘½ä»¤å¤„ç†å™¨
- `services/` - ä¸šåŠ¡é€»è¾‘å±‚
- `models/` - æ•°æ®ç»“æ„å®šä¹‰
- `utils/` - å·¥å…·å‡½æ•°

</details>

---

## ğŸ¨ æ ¸å¿ƒæ•°æ®æ¨¡å‹

### MultiDesk é…ç½®ç»“æ„

```typescript
interface MultiDeskConfig {
  Servers: {
    Group: Group[];  // æœåŠ¡å™¨åˆ†ç»„
  };
  Settings: any;     // å…¨å±€è®¾ç½®
  ExternalTools?: {
    ExternalTool: ExternalTool[];
  };
}

interface Group {
  Properties: GroupProperties;  // åˆ†ç»„å±æ€§
  Server: Server | Server[];    // å•ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨
}

interface GroupProperties {
  Name: string;
  ProxyType: number;        // 0=æ— , 1=SOCKS5
  SocksHostname: string;    // ä»£ç†ä¸»æœº
  SocksPort: number;        // ä»£ç†ç«¯å£
  SocksUserName: string;
  SocksPassword: string;    // åŠ å¯†å¯†ç 
  // ... RDP é…ç½®
}
```

<details>
<summary>æŸ¥çœ‹å®Œæ•´ç±»å‹å®šä¹‰</summary>

```typescript
interface Server {
  Name: string;
  Server: string;           // IP åœ°å€
  InheritProxy: number;     // æ˜¯å¦ç»§æ‰¿åˆ†ç»„ä»£ç†
  ProxyType: number;
  SocksPort: number;
  UserName: string;
  Password: string;
  RDPPort: number;
  // ... æ›´å¤šå±æ€§
}
```

</details>

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1ï¸âƒ£ Clash ç«¯å£æ£€æµ‹

**Rust åç«¯**
```rust
// src-tauri/src/commands/clash.rs
#[tauri::command]
pub fn detect_clash_ports() -> Result<ClashStatus, String> {
    let clash_running = is_port_in_use(7890);
    let verge_running = is_port_in_use(7897);

    let active_port = if verge_running {
        Some(7897)
    } else if clash_running {
        Some(7890)
    } else {
        None
    };

    Ok(ClashStatus {
        clash_running,
        verge_running,
        active_port,
    })
}
```

**TypeScript å‰ç«¯**
```typescript
// src/hooks/useClashDetect.ts
export function useClashDetect(autoRefresh = false, interval = 5000) {
  const [status, setStatus] = useState<ClashStatus | null>(null);

  const detect = async () => {
    const result = await ClashService.detectPorts();
    setStatus(result);
  };

  useEffect(() => {
    detect();
    if (autoRefresh) {
      const timer = setInterval(detect, interval);
      return () => clearInterval(timer);
    }
  }, [autoRefresh, interval]);

  return { status, loading, error, refresh: detect };
}
```

---

### 2ï¸âƒ£ MultiDesk é…ç½®ç®¡ç†

**è¯»å–é…ç½®**
```rust
#[tauri::command]
pub fn read_multidesk_config(path: String) -> Result<MultiDeskConfig, String> {
    let xml_content = fs::read_to_string(&path)?;
    let config: MultiDeskConfig = quick_xml::de::from_str(&xml_content)?;
    Ok(config)
}
```

**è‡ªåŠ¨é…ç½®ä»£ç†**
```rust
#[tauri::command]
pub fn auto_configure_proxy(
    config: MultiDeskConfig,
    active_port: u16,
) -> Result<MultiDeskConfig, String> {
    let mut new_config = config.clone();

    for group in &mut new_config.servers.groups {
        if group.properties.proxy_type == 1 {
            group.properties.socks_port = active_port;
        }
    }

    Ok(new_config)
}
```

---

## ğŸ¨ UI ç•Œé¢é¢„è§ˆ

### ä»ªè¡¨ç›˜
- å®æ—¶æ˜¾ç¤º Clash/Clash Verge è¿è¡ŒçŠ¶æ€
- å±•ç¤ºå½“å‰æ´»åŠ¨ä»£ç†ç«¯å£
- ä¸€é”®åˆ·æ–°æ£€æµ‹

### MultiDesk é…ç½®é¡µ
- åˆ†ç»„ç®¡ç†(å¢åˆ æ”¹æŸ¥)
- æœåŠ¡å™¨åˆ—è¡¨ç¼–è¾‘
- æ‰¹é‡ä»£ç†é…ç½®åŒæ­¥

---

## ğŸ“¦ ä¾èµ–æ¸…å•

### Rust (Cargo.toml)
```toml
[dependencies]
tauri = { version = "1.5", features = ["shell-open"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
quick-xml = { version = "0.31", features = ["serialize"] }
tokio = { version = "1", features = ["full"] }
```

### TypeScript (package.json)
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "zustand": "^4.4.0",
    "@tauri-apps/api": "^1.5.0"
  },
  "devDependencies": {
    "tailwindcss": "^3.3.0",
    "typescript": "^5.2.0",
    "vite": "^5.0.0"
  }
}
```

---

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿ(è§„åˆ’ä¸­)

```typescript
interface Plugin {
  id: string;
  name: string;

  // ç”Ÿå‘½å‘¨æœŸé’©å­
  onLoad?: () => void;
  onUnload?: () => void;

  // åŠŸèƒ½æ¥å£
  detectConfig?: () => Promise<boolean>;
  readConfig?: (path: string) => Promise<any>;
  writeConfig?: (path: string, config: any) => Promise<void>;

  // UI ç»„ä»¶
  configPage?: React.ComponentType;
}
```

**æ”¯æŒçš„æ’ä»¶**
- âœ… MultiDesk Plugin
- ğŸ”² XShell Plugin
- ğŸ”² Putty Plugin
- ğŸ”² RDP Manager Plugin

---

## ğŸ›£ï¸ å¼€å‘è·¯çº¿å›¾

### v1.0 (MVP)
- [x] Clash ç«¯å£æ£€æµ‹
- [x] MultiDesk é…ç½®è¯»å†™
- [ ] å¯†ç åŠ è§£å¯†
- [ ] é…ç½®å¤‡ä»½åŠŸèƒ½

### v1.1
- [ ] æ‰¹é‡æœåŠ¡å™¨å¯¼å…¥
- [ ] é…ç½®æ–‡ä»¶æ ¡éªŒ
- [ ] æš—é»‘ä¸»é¢˜æ”¯æŒ

### v2.0
- [ ] æ’ä»¶ç³»ç»Ÿå®ç°
- [ ] XShell é…ç½®æ”¯æŒ
- [ ] é…ç½®äº‘åŒæ­¥

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç !è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ
- éµå¾ª ESLint/Prettier ä»£ç æ ¼å¼
- éµå¾ª SOLID åŸåˆ™ç¼–å†™ Rust ä»£ç 
- æ‰€æœ‰ PR éœ€é€šè¿‡ CI æµ‹è¯•

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ“§ è”ç³»æ–¹å¼

- Issues: [GitHub Issues](https://github.com/yourusername/clashdesk-manager/issues)
- Email: your.email@example.com

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©,è¯·ç»™ä¸€ä¸ª Star!**

Made with â¤ï¸ by ClashDesk Team

</div>
